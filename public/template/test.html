<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.js"></script>
</head>
<body>
  <nav>
    <a href="/">首页</a>
    <a href="/proxy.html">数据代理</a>
    <a href="/bbs.html">双向通信</a>
  </nav>
  用户端首页
  <!-- <img src="/img/a.png" alt=""> -->
  <!-- <img src="/upload/banner/noimage.png" alt=""> -->
  <input type="button" value="求mongod" id="mg">	<br/>
  <input type="button" value="求注册接口" id="mg2"><br/>
  <input type="button" value="求登陆接口" id="mg3"><br/>
  <hr />
  <form action="/api/reg" method="post">
  	用户名：<input type="text" name="username" value="" /><br/>
  	密码：<input type="text" value="" name="password"/><br/>
  	<input type="submit" id="sub" name="" value="sub提交"/>
  </form>
  

  <script src="./js/port.js"></script>
  <script>
    	console.log('准备完毕')
     $('#mg').click(function(){
    	console.log(111)
      $.ajax({
      	
        url:port+'/api/product',
        data:{dataName:'kitchen',start:0,count:3},
        success:function(res){
          console.log('ajax_mongodb',res)
        }
      })
    })
	$(function(){
      $('#mg2').click(function(){

        var username='root123';
        var password='root123';
        

        //FormData混合提交 流文件与普通表单混合
        //https://blog.csdn.net/qq_36947174/article/details/82709124

        var form_data = new FormData($('#uploadForm')[0]);
        form_data.append('username',username);
        form_data.append('password',password);
				form_data.append('nikename','前端自主注册用户');
        
        form_data.append('dataName',"user");
        // form_data.append('icon',new FormData($('#uploadForm')[0]));//添加流

        $.ajax({
          url: '/api/reg',
          type: 'POST',
          data:form_data,
          contentType: false,//不设置编码类型,在进行文件流与普通字符串混合上传的时候，需要设置为false
          processData: false,//不进行数据处理
          success: function (url) {
           console.log(url);//前端跳转
          },
          error: function (data) {
            console.log(data.status);
          }
        });
      })
    })
		$(function(){
      $('#mg3').click(function(){

        var username='root123';
        var password='root14423';
        

        //FormData混合提交 流文件与普通表单混合
        //https://blog.csdn.net/qq_36947174/article/details/82709124

        var form_data = new FormData();
        form_data.append('username',username);
        form_data.append('password',password);
				
        
        form_data.append('dataName',"user");
        // form_data.append('icon',new FormData($('#uploadForm')[0]));//添加流

        $.ajax({
          url: '/api/login',
          type: 'POST',
          data:form_data,
          contentType: false,//不设置编码类型,在进行文件流与普通字符串混合上传的时候，需要设置为false
          processData: false,//不进行数据处理
          success: function (url) {
           console.log(url);//前端跳转
          },
          error: function (data) {
            console.log(data.status);
          }
        });
      })
    })
		
    
  </script>
</body>
</html>